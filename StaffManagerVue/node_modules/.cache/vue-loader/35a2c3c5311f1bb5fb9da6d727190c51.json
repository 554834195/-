{"remainingRequest":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\src\\views\\clerk\\saveClerk.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\src\\views\\clerk\\saveClerk.vue","mtime":1678900645511},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1679135636602},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"D:\\Work\\WorkSpace\\GitWorkSpace\\TenShop\\resource\\StaffManager\\src\\staffManagement\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1679135637839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY2xlcmsgZnJvbSAiQC9hcGkvY2xlcmsiOw0KaW1wb3J0IGRlcGFydG1lbnQgZnJvbSAiQC9hcGkvZGVwYXJ0bWVudCI7DQppbXBvcnQgSW1hZ2VDcm9wcGVyIGZyb20gIkAvY29tcG9uZW50cy9JbWFnZUNyb3BwZXIiOw0KaW1wb3J0IFBhblRodW1iIGZyb20gIkAvY29tcG9uZW50cy9QYW5UaHVtYiI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBJbWFnZUNyb3BwZXIsIFBhblRodW1iIH0sDQogIGRhdGEoKSB7DQogICAgdmFyIGNoZWNrUGhvbmUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBpZiAoIXZhbHVlKSB7DQogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuaJi+acuuWPt+S4jeiDveS4uuepuiIpKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IHJlZyA9IC9eMVszfDR8NXw3fDhdWzAtOV1cZHs4fSQvOw0KICAgICAgICBpZiAocmVnLnRlc3QodmFsdWUpKSB7DQogICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXmraPnoa7nmoTmiYvmnLrlj7ciKSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIHJldHVybiB7DQogICAgICBjbGVyazoge30sDQogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLCAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsDQogICAgICBkZXBhcnRtZW50TGlzdDogbnVsbCwNCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwNCiAgICAgIGltYWdlY3JvcHBlclNob3c6IGZhbHNlLCAvL+S4iuS8oOW8ueeql+e7hOS7tuaYr+WQpuaYvuekug0KICAgICAgaW1hZ2Vjcm9wcGVyS2V5OiAwLCAvL+S4iuS8oOe7hOS7tueahGtleeWAvA0KICAgICAgcnVsZTogew0KICAgICAgICBzZXg6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36YCJ5oup5oCn5YirIiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sDQogICAgICAgIGFkZHJlc3M6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35aGr5YaZ5Zyw5Z2AIiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sDQogICAgICAgIHBvc2l0aW9uOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+Whq+WGmeiBjOWKoSIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0sDQogICAgICAgIF0sDQogICAgICAgIGRlcGFydG1lbnRJZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6npg6jpl6giLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LA0KICAgICAgICBdLA0KICAgICAgICBwaG9uZU51bWJlcjogWw0KICAgICAgICAgIHsgdmFsaWRhdG9yOiBjaGVja1Bob25lLCByZXF1aXJlZDogdHJ1ZSwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICAgIG5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5aeT5ZCNIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgbWluOiAyLA0KICAgICAgICAgICAgbWF4OiAxMCwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggMiDliLAgMTAg5Liq5a2X56ymIiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgcGF0dGVybjogL15bXHU0ZTAwLVx1OWZhNV9hLXpBLVowLTkuwrctXSskLywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlp5PlkI3kuI3mlK/mjIHnibnmrorlrZfnrKYiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIGlkQ2FyZDogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXouqvku73or4Hlj7ciLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtaW46IDE1LA0KICAgICAgICAgICAgbWF4OiAxOCwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7flpoLlrp7loavlhpkxOOS9jeWPt+egge+8jOS7peS+m+aguOWvuSIsDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICAgICAgICAgIHBhdHRlcm46IC8oXlxkezE1fSQpfCheXGR7MTh9JCl8KF5cZHsxN30oXGR8WHx4KSQpLywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXmraPnoa7nmoTouqvku73or4Hlj7fnoIEiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5pbml0KCk7DQogICAgdGhpcy5pbml0RGVwYXJ0bWVudCgpOw0KICB9LA0KICB3YXRjaDogew0KICAgIC8v55uR5ZCsDQogICAgJHJvdXRlKHRvLCBmcm9tKSB7DQogICAgICAvL+i3r+eUseWPkeeUn+WPmOWMliDmlrnms5XlsLHkvJrmiafooYwNCiAgICAgIHRoaXMuaW5pdCgpOw0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByZXNldEZvcm0oZm9ybU5hbWUpIHsNCiAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsNCiAgICAgIH0sDQogICAgY2xvc2UoKSB7DQogICAgICAvL+WFs+mXreS4iuS8oOW8ueahhueahOaWueazlQ0KICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7DQogICAgICAvL+S4iuS8oOe7hOS7tuWIneWni+WMlg0KICAgICAgdGhpcy5pbWFnZWNyb3BwZXJLZXkgPSB0aGlzLmltYWdlY3JvcHBlcktleSArIDE7DQogICAgfSwNCiAgICAvL+S4iuS8oOaIkOWKn+aWueazlQ0KICAgIGNyb3BTdWNjZXNzKGRhdGEpIHsNCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyU2hvdyA9IGZhbHNlOw0KICAgICAgLy/kuIrkvKDkuYvlkI7mjqXlj6Pov5Tlm57lm77niYflnLDlnYANCiAgICAgIHRoaXMuY2xlcmsucGhvdG8gPSBkYXRhLnVybDsNCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOw0KICAgIH0sDQogICAgLy/liJ3lp4vljJYNCiAgICBpbml0KCkgew0KICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZOWAvA0KICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsNCiAgICAgICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7DQogICAgICAgIHRoaXMuZ2V0Q2xlcmtCeUlkKGlkKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8v5riF56m66KGo5Y2VDQogICAgICAgIHRoaXMuY2xlcmsgPSB7fTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8v5p+l6K+i6YOo6ZeoDQogICAgaW5pdERlcGFydG1lbnQoKSB7DQogICAgICBkZXBhcnRtZW50LmdldERlcGFydG1lbnRMaXN0KCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5kZXBhcnRtZW50TGlzdCA9IHJlc3BvbnNlLmRhdGEuZGVwYXJ0bWVudExpc3Q7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v5L+u5pS5DQogICAgdXBkYXRlQ2xlcmsoKSB7DQogICAgICBjbGVyay51cGRhdGVDbGVyayh0aGlzLmNsZXJrKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiLA0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiL2NsZXJrL2xpc3RDbGVyayIgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v5qC55o2uaWTmn6Xor6INCiAgICBnZXRDbGVya0J5SWQoaWQpIHsNCiAgICAgIGNsZXJrDQogICAgICAgIC5nZXRDbGVya0J5SWQoaWQpDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMuY2xlcmsgPSByZXNwb25zZS5kYXRhLmNsZXJrOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7DQogICAgfSwNCiAgICBzYXZlT3JVcGRhdGUoZm9ybU5hbWUpIHsNCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICAvL+WIpOaWreaYr+S/ruaUuei/mOaYr+a3u+WKoA0KICAgICAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWQNCiAgICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgew0KICAgICAgICAgICAgLy/kv67mlLkNCiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2xlcmsoKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgLy/mt7vliqANCiAgICAgICAgICAgIHRoaXMuc2F2ZUNsZXJrKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8v5re75YqgDQogICAgc2F2ZUNsZXJrKGZvcm1OYW1lKSB7DQogICAgICBjbGVyaw0KICAgICAgICAuYWRkQ2xlcmsodGhpcy5jbGVyaykNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgLy/mt7vliqDmiJDlip8NCiAgICAgICAgICAvL+aPkOekuuS/oeaBrw0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgbWVzc2FnZTogIua3u+WKoOaIkOWKnyIsDQogICAgICAgICAgfSk7DQogICAgICAgICAgLy/lm57liLDliJfooagg6Lev55Sx6Lez6L2sKOmHjeWumuWQkSkNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvY2xlcmsvbGlzdENsZXJrIiB9KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIC8v5o+Q56S65L+h5oGvDQogICAgICAgICAgLy8gdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgLy8gICB0eXBlOiAid2FybmluZyIsDQogICAgICAgICAgLy8gICBtZXNzYWdlOiAi5re75Yqg5aSx6LSlIiwNCiAgICAgICAgICAvLyB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["saveClerk.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveClerk.vue","sourceRoot":"src/views/clerk","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"clerk\" ref=\"clerk\" :rules=\"rule\" label-width=\"120px\">\r\n      <el-form-item label=\"员工编号\">\r\n        <el-col :span=\"6\">\r\n          <el-input :span=\"6\" :disabled=\"true\" v-model=\"clerk.id\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"name\" label=\"员工名称\">\r\n        <el-col :span=\"4\">\r\n          <el-input maxlength=\"5\" show-word-limit v-model=\"clerk.name\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"sex\" label=\"性别\">\r\n        <el-col :span=\"4\">\r\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"0\">女</el-radio>\r\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"1\">男</el-radio>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"phoneNumber\" label=\"手机号\">\r\n        <el-col :span=\"6\">\r\n          <el-input v-model=\"clerk.phoneNumber\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"idCard\" label=\"身份证号\">\r\n        <el-col :span=\"8\">\r\n          <el-input v-model=\"clerk.idCard\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"address\" label=\"地址\">\r\n        <el-input v-model=\"clerk.address\" />\r\n      </el-form-item>\r\n      <el-form-item prop=\"position\" label=\"职务\">\r\n        <el-col :span=\"4\">\r\n          <el-input v-model=\"clerk.position\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"departmentId\" label=\"部门\">\r\n        <el-select v-model=\"clerk.departmentId\" clearable placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in departmentList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"员工照片\">\r\n        <!-- 头衔缩略图 -->\r\n        <pan-thumb :image=\"clerk.photo + ''\" />\r\n        <!-- 文件上传按钮 -->\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-upload\"\r\n          @click=\"imagecropperShow = true\"\r\n          >更换照片</el-button\r\n        >\r\n        <!--v-show：是否显示上传组件\r\n        :key：类似于id，如果一个页面多个图片上传控件，可以做区分\r\n        :url：后台上传的url地址\r\n        @close：关闭上传组件\r\n        @crop-upload-success：上传成功后的回调-->\r\n        <image-cropper\r\n          v-show=\"imagecropperShow\"\r\n          :width=\"300\"\r\n          :height=\"300\"\r\n          :key=\"imagecropperKey\"\r\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\r\n          field=\"file\"\r\n          @close=\"close\"\r\n          @crop-upload-success=\"cropSuccess\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          :disabled=\"saveBtnDisabled\"\r\n          type=\"primary\"\r\n          @click=\"saveOrUpdate('clerk')\"\r\n          >保存</el-button\r\n        >\r\n        <el-button @click=\"resetForm('clerk')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clerk from \"@/api/clerk\";\r\nimport department from \"@/api/department\";\r\nimport ImageCropper from \"@/components/ImageCropper\";\r\nimport PanThumb from \"@/components/PanThumb\";\r\n\r\nexport default {\r\n  components: { ImageCropper, PanThumb },\r\n  data() {\r\n    var checkPhone = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"手机号不能为空\"));\r\n      } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/;\r\n        if (reg.test(value)) {\r\n          callback();\r\n        } else {\r\n          return callback(new Error(\"请输入正确的手机号\"));\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      clerk: {},\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      departmentList: null,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      imagecropperShow: false, //上传弹窗组件是否显示\r\n      imagecropperKey: 0, //上传组件的key值\r\n      rule: {\r\n        sex: [{ required: true, message: \"请选择性别\", trigger: \"change\" }],\r\n        address: [{ required: true, message: \"请填写地址\", trigger: \"change\" }],\r\n        position: [\r\n          { required: true, message: \"请填写职务\", trigger: \"change\" },\r\n        ],\r\n        departmentId: [\r\n          { required: true, message: \"请选择部门\", trigger: \"change\" },\r\n        ],\r\n        phoneNumber: [\r\n          { validator: checkPhone, required: true, trigger: \"blur\" },\r\n        ],\r\n        name: [\r\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: \"长度在 2 到 10 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            required: true,\r\n            pattern: /^[\\u4e00-\\u9fa5_a-zA-Z0-9.·-]+$/,\r\n            message: \"姓名不支持特殊字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        idCard: [\r\n          { required: true, message: \"请输入身份证号\", trigger: \"blur\" },\r\n          {\r\n            min: 15,\r\n            max: 18,\r\n            message: \"请如实填写18位号码，以供核对\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            required: true,\r\n            pattern: /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/,\r\n            message: \"请输入正确的身份证号码\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.initDepartment();\r\n  },\r\n  watch: {\r\n    //监听\r\n    $route(to, from) {\r\n      //路由发生变化 方法就会执行\r\n      this.init();\r\n    },\r\n  },\r\n  methods: {\r\n    resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      },\r\n    close() {\r\n      //关闭上传弹框的方法\r\n      this.imagecropperShow = false;\r\n      //上传组件初始化\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n    //上传成功方法\r\n    cropSuccess(data) {\r\n      this.imagecropperShow = false;\r\n      //上传之后接口返回图片地址\r\n      this.clerk.photo = data.url;\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n    //初始化\r\n    init() {\r\n      //判断路径中是否有id值\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id;\r\n        this.getClerkById(id);\r\n      } else {\r\n        //清空表单\r\n        this.clerk = {};\r\n      }\r\n    },\r\n    //查询部门\r\n    initDepartment() {\r\n      department.getDepartmentList().then((response) => {\r\n        this.departmentList = response.data.departmentList;\r\n      });\r\n    },\r\n    //修改\r\n    updateClerk() {\r\n      clerk.updateClerk(this.clerk).then((response) => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"修改成功!\",\r\n        });\r\n        this.$router.push({ path: \"/clerk/listClerk\" });\r\n      });\r\n    },\r\n    //根据id查询\r\n    getClerkById(id) {\r\n      clerk\r\n        .getClerkById(id)\r\n        .then((response) => {\r\n          this.clerk = response.data.clerk;\r\n        })\r\n        .catch((error) => {});\r\n    },\r\n    saveOrUpdate(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          //判断是修改还是添加\r\n          //判断路径中是否有id\r\n          if (this.$route.params && this.$route.params.id) {\r\n            //修改\r\n            this.updateClerk();\r\n          } else {\r\n            //添加\r\n            this.saveClerk();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //添加\r\n    saveClerk(formName) {\r\n      clerk\r\n        .addClerk(this.clerk)\r\n        .then((response) => {\r\n          //添加成功\r\n          //提示信息\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"添加成功\",\r\n          });\r\n          //回到列表 路由跳转(重定向)\r\n          this.$router.push({ path: \"/clerk/listClerk\" });\r\n        })\r\n        .catch((error) => {\r\n          //提示信息\r\n          // this.$message({\r\n          //   type: \"warning\",\r\n          //   message: \"添加失败\",\r\n          // });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"]}]}