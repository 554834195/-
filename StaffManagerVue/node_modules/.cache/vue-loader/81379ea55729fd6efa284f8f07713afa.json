{"remainingRequest":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\src\\views\\clerk\\saveClerk.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\src\\views\\clerk\\saveClerk.vue","mtime":1679590045791},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1679135636602},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1679135637839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgY2xlcmsgZnJvbSAiQC9hcGkvY2xlcmsiOw0KaW1wb3J0IGRlcGFydG1lbnQgZnJvbSAiQC9hcGkvZGVwYXJ0bWVudCI7DQppbXBvcnQgSW1hZ2VDcm9wcGVyIGZyb20gIkAvY29tcG9uZW50cy9JbWFnZUNyb3BwZXIiOw0KaW1wb3J0IFBhblRodW1iIGZyb20gIkAvY29tcG9uZW50cy9QYW5UaHVtYiI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogeyBJbWFnZUNyb3BwZXIsIFBhblRodW1iIH0sDQogIGRhdGEoKSB7DQogICAgdmFyIGNoZWNrUGhvbmUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICBpZiAoIXZhbHVlKSB7DQogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuaJi+acuuWPt+S4jeiDveS4uuepuiIpKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IHJlZyA9IC9eMVszfDR8NXw3fDhdWzAtOV1cZHs4fSQvOw0KICAgICAgICBpZiAocmVnLnRlc3QodmFsdWUpKSB7DQogICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXmraPnoa7nmoTmiYvmnLrlj7ciKSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9Ow0KICAgIHJldHVybiB7DQogICAgICBiYXNlQXBpOiAgcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwNCiAgICAgIGNsZXJrOiB7fSwNCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwNCiAgICAgIGRlcGFydG1lbnRMaXN0OiBudWxsLA0KICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwgLy8g5L+d5a2Y5oyJ6ZKu5piv5ZCm56aB55SoLA0KICAgICAgaW1hZ2Vjcm9wcGVyU2hvdzogZmFsc2UsIC8v5LiK5Lyg5by556qX57uE5Lu25piv5ZCm5pi+56S6DQogICAgICBpbWFnZWNyb3BwZXJLZXk6IDAsIC8v5LiK5Lyg57uE5Lu255qEa2V55YC8DQogICAgICBydWxlOiB7DQogICAgICAgIHNleDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fpgInmi6nmgKfliKsiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9XSwNCiAgICAgICAgYWRkcmVzczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7floavlhpnlnLDlnYAiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9XSwNCiAgICAgICAgcG9zaXRpb246IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35aGr5YaZ6IGM5YqhIiwgdHJpZ2dlcjogImNoYW5nZSIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgZGVwYXJ0bWVudElkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+mAieaLqemDqOmXqCIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0sDQogICAgICAgIF0sDQogICAgICAgIHBob25lTnVtYmVyOiBbDQogICAgICAgICAgeyB2YWxpZGF0b3I6IGNoZWNrUGhvbmUsIHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlp5PlkI0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBtaW46IDIsDQogICAgICAgICAgICBtYXg6IDEwLA0KICAgICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCAyIOWIsCAxMCDkuKrlrZfnrKYiLA0KICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLA0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICBwYXR0ZXJuOiAvXltcdTRlMDAtXHU5ZmE1X2EtekEtWjAtOS7Cty1dKyQvLA0KICAgICAgICAgICAgbWVzc2FnZTogIuWnk+WQjeS4jeaUr+aMgeeJueauiuWtl+espiIsDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgaWRDYXJkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpei6q+S7veivgeWPtyIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIG1pbjogMTUsDQogICAgICAgICAgICBtYXg6IDE4LA0KICAgICAgICAgICAgbWVzc2FnZTogIuivt+WmguWunuWhq+WGmTE45L2N5Y+356CB77yM5Lul5L6b5qC45a+5IiwNCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwNCiAgICAgICAgICB9LA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgcGF0dGVybjogLyheXGR7MTV9JCl8KF5cZHsxOH0kKXwoXlxkezE3fShcZHxYfHgpJCkvLA0KICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeato+ehrueahOi6q+S7veivgeWPt+eggSIsDQogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmluaXQoKTsNCiAgICB0aGlzLmluaXREZXBhcnRtZW50KCk7DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy/nm5HlkKwNCiAgICAkcm91dGUodG8sIGZyb20pIHsNCiAgICAgIC8v6Lev55Sx5Y+R55Sf5Y+Y5YyWIOaWueazleWwseS8muaJp+ihjA0KICAgICAgdGhpcy5pbml0KCk7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgew0KICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOw0KICAgICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIC8v5YWz6Zet5LiK5Lyg5by55qGG55qE5pa55rOVDQogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsNCiAgICAgIC8v5LiK5Lyg57uE5Lu25Yid5aeL5YyWDQogICAgICB0aGlzLmltYWdlY3JvcHBlcktleSA9IHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ICsgMTsNCiAgICB9LA0KICAgIC8v5LiK5Lyg5oiQ5Yqf5pa55rOVDQogICAgY3JvcFN1Y2Nlc3MoZGF0YSkgew0KICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7DQogICAgICAvL+S4iuS8oOS5i+WQjuaOpeWPo+i/lOWbnuWbvueJh+WcsOWdgA0KICAgICAgdGhpcy5jbGVyay5waG90byA9IGRhdGEudXJsOw0KICAgICAgdGhpcy5pbWFnZWNyb3BwZXJLZXkgPSB0aGlzLmltYWdlY3JvcHBlcktleSArIDE7DQogICAgfSwNCiAgICAvL+WIneWni+WMlg0KICAgIGluaXQoKSB7DQogICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlk5YC8DQogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgew0KICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsNCiAgICAgICAgdGhpcy5nZXRDbGVya0J5SWQoaWQpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy/muIXnqbrooajljZUNCiAgICAgICAgdGhpcy5jbGVyayA9IHt9Ow0KICAgICAgfQ0KICAgIH0sDQogICAgLy/mn6Xor6Lpg6jpl6gNCiAgICBpbml0RGVwYXJ0bWVudCgpIHsNCiAgICAgIGRlcGFydG1lbnQuZ2V0RGVwYXJ0bWVudExpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLmRlcGFydG1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YS5kZXBhcnRtZW50TGlzdDsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/kv67mlLkNCiAgICB1cGRhdGVDbGVyaygpIHsNCiAgICAgIGNsZXJrLnVwZGF0ZUNsZXJrKHRoaXMuY2xlcmspLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfISIsDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvY2xlcmsvbGlzdENsZXJrIiB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/moLnmja5pZOafpeivog0KICAgIGdldENsZXJrQnlJZChpZCkgew0KICAgICAgY2xlcmsNCiAgICAgICAgLmdldENsZXJrQnlJZChpZCkNCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgdGhpcy5jbGVyayA9IHJlc3BvbnNlLmRhdGEuY2xlcms7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTsNCiAgICB9LA0KICAgIHNhdmVPclVwZGF0ZShmb3JtTmFtZSkgew0KICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIC8v5Yik5pat5piv5L+u5pS56L+Y5piv5re75YqgDQogICAgICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZA0KICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7DQogICAgICAgICAgICAvL+S/ruaUuQ0KICAgICAgICAgICAgdGhpcy51cGRhdGVDbGVyaygpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvL+a3u+WKoA0KICAgICAgICAgICAgdGhpcy5zYXZlQ2xlcmsoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/mt7vliqANCiAgICBzYXZlQ2xlcmsoZm9ybU5hbWUpIHsNCiAgICAgIGNsZXJrDQogICAgICAgIC5hZGRDbGVyayh0aGlzLmNsZXJrKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAvL+a3u+WKoOaIkOWKnw0KICAgICAgICAgIC8v5o+Q56S65L+h5oGvDQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICAvL+WbnuWIsOWIl+ihqCDot6/nlLHot7Povawo6YeN5a6a5ZCRKQ0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9wZXJtaXNzaW9ucy9saXN0Q2xlcmsiIH0pOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgLy/mj5DnpLrkv6Hmga8NCiAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAvLyAgIHR5cGU6ICJ3YXJuaW5nIiwNCiAgICAgICAgICAvLyAgIG1lc3NhZ2U6ICLmt7vliqDlpLHotKUiLA0KICAgICAgICAgIC8vIH0pOw0KICAgICAgICB9KTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["saveClerk.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"saveClerk.vue","sourceRoot":"src/views/clerk","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"clerk\" ref=\"clerk\" :rules=\"rule\" label-width=\"120px\">\r\n      <el-form-item label=\"员工编号\">\r\n        <el-col :span=\"6\">\r\n          <el-input :span=\"6\" :disabled=\"true\" v-model=\"clerk.id\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"name\" label=\"员工名称\">\r\n        <el-col :span=\"4\">\r\n          <el-input maxlength=\"5\" show-word-limit v-model=\"clerk.name\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"sex\" label=\"性别\">\r\n        <el-col :span=\"4\">\r\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"0\">女</el-radio>\r\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"1\">男</el-radio>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"phoneNumber\" label=\"手机号\">\r\n        <el-col :span=\"6\">\r\n          <el-input v-model=\"clerk.phoneNumber\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"idCard\" label=\"身份证号\">\r\n        <el-col :span=\"8\">\r\n          <el-input v-model=\"clerk.idCard\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"address\" label=\"地址\">\r\n        <el-input v-model=\"clerk.address\" />\r\n      </el-form-item>\r\n      <el-form-item prop=\"position\" label=\"职务\">\r\n        <el-col :span=\"4\">\r\n          <el-input v-model=\"clerk.position\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"departmentId\" label=\"部门\">\r\n        <el-select v-model=\"clerk.departmentId\" clearable placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in departmentList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"员工照片\">\r\n        <!-- 头衔缩略图 -->\r\n        <pan-thumb :image=\"baseApi + clerk.photo\" />\r\n        <!-- 文件上传按钮 -->\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-upload\"\r\n          @click=\"imagecropperShow = true\"\r\n          >更换照片</el-button\r\n        >\r\n        <!--v-show：是否显示上传组件\r\n        :key：类似于id，如果一个页面多个图片上传控件，可以做区分\r\n        :url：后台上传的url地址\r\n        @close：关闭上传组件\r\n        @crop-upload-success：上传成功后的回调-->\r\n        <image-cropper\r\n          v-show=\"imagecropperShow\"\r\n          :width=\"300\"\r\n          :height=\"300\"\r\n          :key=\"imagecropperKey\"\r\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\r\n          field=\"file\"\r\n          @close=\"close\"\r\n          @crop-upload-success=\"cropSuccess\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          :disabled=\"saveBtnDisabled\"\r\n          type=\"primary\"\r\n          @click=\"saveOrUpdate('clerk')\"\r\n          >保存</el-button\r\n        >\r\n        <el-button @click=\"resetForm('clerk')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clerk from \"@/api/clerk\";\r\nimport department from \"@/api/department\";\r\nimport ImageCropper from \"@/components/ImageCropper\";\r\nimport PanThumb from \"@/components/PanThumb\";\r\n\r\nexport default {\r\n  components: { ImageCropper, PanThumb },\r\n  data() {\r\n    var checkPhone = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"手机号不能为空\"));\r\n      } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/;\r\n        if (reg.test(value)) {\r\n          callback();\r\n        } else {\r\n          return callback(new Error(\"请输入正确的手机号\"));\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      baseApi:  process.env.VUE_APP_BASE_API,\r\n      clerk: {},\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      departmentList: null,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      imagecropperShow: false, //上传弹窗组件是否显示\r\n      imagecropperKey: 0, //上传组件的key值\r\n      rule: {\r\n        sex: [{ required: true, message: \"请选择性别\", trigger: \"change\" }],\r\n        address: [{ required: true, message: \"请填写地址\", trigger: \"change\" }],\r\n        position: [\r\n          { required: true, message: \"请填写职务\", trigger: \"change\" },\r\n        ],\r\n        departmentId: [\r\n          { required: true, message: \"请选择部门\", trigger: \"change\" },\r\n        ],\r\n        phoneNumber: [\r\n          { validator: checkPhone, required: true, trigger: \"blur\" },\r\n        ],\r\n        name: [\r\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: \"长度在 2 到 10 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            required: true,\r\n            pattern: /^[\\u4e00-\\u9fa5_a-zA-Z0-9.·-]+$/,\r\n            message: \"姓名不支持特殊字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        idCard: [\r\n          { required: true, message: \"请输入身份证号\", trigger: \"blur\" },\r\n          {\r\n            min: 15,\r\n            max: 18,\r\n            message: \"请如实填写18位号码，以供核对\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            required: true,\r\n            pattern: /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/,\r\n            message: \"请输入正确的身份证号码\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.initDepartment();\r\n  },\r\n  watch: {\r\n    //监听\r\n    $route(to, from) {\r\n      //路由发生变化 方法就会执行\r\n      this.init();\r\n    },\r\n  },\r\n  methods: {\r\n    resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      },\r\n    close() {\r\n      //关闭上传弹框的方法\r\n      this.imagecropperShow = false;\r\n      //上传组件初始化\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n    //上传成功方法\r\n    cropSuccess(data) {\r\n      this.imagecropperShow = false;\r\n      //上传之后接口返回图片地址\r\n      this.clerk.photo = data.url;\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n    //初始化\r\n    init() {\r\n      //判断路径中是否有id值\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id;\r\n        this.getClerkById(id);\r\n      } else {\r\n        //清空表单\r\n        this.clerk = {};\r\n      }\r\n    },\r\n    //查询部门\r\n    initDepartment() {\r\n      department.getDepartmentList().then((response) => {\r\n        this.departmentList = response.data.departmentList;\r\n      });\r\n    },\r\n    //修改\r\n    updateClerk() {\r\n      clerk.updateClerk(this.clerk).then((response) => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"修改成功!\",\r\n        });\r\n        this.$router.push({ path: \"/clerk/listClerk\" });\r\n      });\r\n    },\r\n    //根据id查询\r\n    getClerkById(id) {\r\n      clerk\r\n        .getClerkById(id)\r\n        .then((response) => {\r\n          this.clerk = response.data.clerk;\r\n        })\r\n        .catch((error) => {});\r\n    },\r\n    saveOrUpdate(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          //判断是修改还是添加\r\n          //判断路径中是否有id\r\n          if (this.$route.params && this.$route.params.id) {\r\n            //修改\r\n            this.updateClerk();\r\n          } else {\r\n            //添加\r\n            this.saveClerk();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //添加\r\n    saveClerk(formName) {\r\n      clerk\r\n        .addClerk(this.clerk)\r\n        .then((response) => {\r\n          //添加成功\r\n          //提示信息\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"添加成功\",\r\n          });\r\n          //回到列表 路由跳转(重定向)\r\n          this.$router.push({ path: \"/permissions/listClerk\" });\r\n        })\r\n        .catch((error) => {\r\n          //提示信息\r\n          // this.$message({\r\n          //   type: \"warning\",\r\n          //   message: \"添加失败\",\r\n          // });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"]}]}