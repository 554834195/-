{"remainingRequest":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\src\\views\\permissions\\saveClerk.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\src\\views\\permissions\\saveClerk.vue","mtime":1679634880282},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\babel.config.js","mtime":1678900645413},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1679135636602},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1679135637839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy9cdTU5MjlcdTU5MjlcdTVGMDBcdTVGQzMvT25lRHJpdmUvXHU2ODRDXHU5NzYyL1x1NUI5RVx1OERGNS9cdTk4NzlcdTc2RUUvU3RhZmZNYW5hZ2VyL1N0YWZmTWFuYWdlclZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IGNsZXJrIGZyb20gIkAvYXBpL2NsZXJrIjsKaW1wb3J0IHJvbGUgZnJvbSAiQC9hcGkvcm9sZSI7CmltcG9ydCBkZXBhcnRtZW50IGZyb20gIkAvYXBpL2RlcGFydG1lbnQiOwppbXBvcnQgSW1hZ2VDcm9wcGVyIGZyb20gIkAvY29tcG9uZW50cy9JbWFnZUNyb3BwZXIiOwppbXBvcnQgUGFuVGh1bWIgZnJvbSAiQC9jb21wb25lbnRzL1BhblRodW1iIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEltYWdlQ3JvcHBlcjogSW1hZ2VDcm9wcGVyLAogICAgUGFuVGh1bWI6IFBhblRodW1iCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF9yZWY7CiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgYmFzZUFwaTogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAgICAgbWFuYWdlbWVudEluZm86ICIiLAogICAgICBjbGVyazoge30sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsCiAgICAgIC8vIOS/neWtmOaMiemSruaYr+WQpuemgeeUqCwKICAgICAgZGVwYXJ0bWVudExpc3Q6IG51bGwKICAgIH0sIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAic2F2ZUJ0bkRpc2FibGVkIiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImltYWdlY3JvcHBlclNob3ciLCBmYWxzZSksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiaW1hZ2Vjcm9wcGVyS2V5IiwgMCksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiY2xlcmtJZCIsICIiKSwgX3JlZjsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKTsKICAgIHRoaXMuaW5pdERlcGFydG1lbnQoKTsKICB9LAogIHdhdGNoOiB7CiAgICAvL+ebkeWQrAogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUodG8sIGZyb20pIHsKICAgICAgLy/ot6/nlLHlj5HnlJ/lj5jljJYg5pa55rOV5bCx5Lya5omn6KGMCiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy/liJ3lp4vljJYKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7CiAgICAgIC8v5Yik5pat6Lev5b6E5Lit5piv5ZCm5pyJaWTlgLwKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgdGhpcy5jbGVya0lkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICAgIHRoaXMuZ2V0Q2xlcmtCeUlkKGlkKTsKICAgICAgICB0aGlzLmluaXRSb2xlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICB0aGlzLmNsZXJrID0ge307CiAgICAgIH0KICAgIH0sCiAgICBpbml0Um9sZTogZnVuY3Rpb24gaW5pdFJvbGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJvbGUuZ2V0Um9sZUJ5Q2xlcmtJZCh0aGlzLmNsZXJrSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEucm9sZSkgewogICAgICAgICAgX3RoaXMubWFuYWdlbWVudEluZm8gPSAi5pivIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMubWFuYWdlbWVudEluZm8gPSAi5ZCmIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v5p+l6K+i6YOo6ZeoCiAgICBpbml0RGVwYXJ0bWVudDogZnVuY3Rpb24gaW5pdERlcGFydG1lbnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBkZXBhcnRtZW50LmdldERlcGFydG1lbnRMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuZGVwYXJ0bWVudExpc3QgPSByZXNwb25zZS5kYXRhLmRlcGFydG1lbnRMaXN0OwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5p+l6K+iCiAgICBnZXRDbGVya0J5SWQ6IGZ1bmN0aW9uIGdldENsZXJrQnlJZChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgY2xlcmsuZ2V0Q2xlcmtCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5jbGVyayA9IHJlc3BvbnNlLmRhdGEuY2xlcms7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge30pOwogICAgfSwKICAgIC8v5re75YqgCiAgICBzYXZlOiBmdW5jdGlvbiBzYXZlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgcm9sZS51b2RhdGVSb2xlQnlDbGVya0lkKHRoaXMuY2xlcmtJZCwgdGhpcy5tYW5hZ2VtZW50SW5mbykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczQuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyEiCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXM0LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiL3Blcm1pc3Npb25zL2xpc3RQZXJtaXNzaW9ucyIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["clerk","role","department","ImageCropper","PanThumb","components","data","_ref","baseApi","process","env","VUE_APP_BASE_API","managementInfo","saveBtnDisabled","departmentList","_defineProperty","created","init","initDepartment","watch","$route","to","from","methods","params","id","clerkId","getClerkById","initRole","_this","getRoleByClerkId","then","response","_this2","getDepartmentList","_this3","catch","error","save","_this4","uodateRoleByClerkId","$message","type","message","$router","push","path"],"sources":["src/views/permissions/saveClerk.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form label-width=\"140px\">\r\n      <el-form-item label=\"员工编号\">\r\n        <el-input :span=\"6\" :disabled=\"true\" v-model=\"clerk.id\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"员工名称\">\r\n        <el-input\r\n          :disabled=\"true\"\r\n          maxlength=\"10\"\r\n          show-word-limit\r\n          v-model=\"clerk.name\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"备注\">\r\n        <el-radio :disabled=\"true\" v-model=\"clerk.sex\" label=\"0\">女</el-radio>\r\n        <el-radio :disabled=\"true\" v-model=\"clerk.sex\" label=\"1\">男</el-radio>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机号\">\r\n        <el-input :disabled=\"true\" v-model=\"clerk.phoneNumber\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"身份证号\">\r\n        <el-input :disabled=\"true\" v-model=\"clerk.idCard\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"地址\">\r\n        <el-input :disabled=\"true\" v-model=\"clerk.address\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"职务\">\r\n        <el-input :disabled=\"true\" v-model=\"clerk.position\" />\r\n      </el-form-item>\r\n      <el-form-item label=\"部门\">\r\n        <el-select\r\n          :disabled=\"true\"\r\n          v-model=\"clerk.departmentId\"\r\n          clearable\r\n          placeholder=\"请选择\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in departmentList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"员工照片\">\r\n        <!-- 头衔缩略图 -->\r\n        <pan-thumb :image=\"clerk.photo\" />\r\n        <!-- 文件上传按钮 -->\r\n      </el-form-item>\r\n      <el-form-item label=\"是否激活管理员权限\">\r\n        <el-radio-group v-model=\"managementInfo\">\r\n          <el-radio-button label=\"是\"></el-radio-button>\r\n          <el-radio-button label=\"否\"></el-radio-button>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click.prevent=\"save\"\r\n          >保存</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clerk from \"@/api/clerk\";\r\nimport role from \"@/api/role\";\r\nimport department from \"@/api/department\";\r\nimport ImageCropper from \"@/components/ImageCropper\";\r\nimport PanThumb from \"@/components/PanThumb\";\r\n\r\nexport default {\r\n  components: { ImageCropper, PanThumb },\r\n  data() {\r\n    return {\r\n      baseApi:  process.env.VUE_APP_BASE_API,\r\n      managementInfo: \"\",\r\n      clerk: {},\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      departmentList: null,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      imagecropperShow: false, //上传弹窗组件是否显示\r\n      imagecropperKey: 0, //上传组件的key值\r\n      clerkId: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.initDepartment();\r\n  },\r\n  watch: {\r\n    //监听\r\n    $route(to, from) {\r\n      //路由发生变化 方法就会执行\r\n      this.init();\r\n    },\r\n  },\r\n  methods: {\r\n    //初始化\r\n    init() {\r\n      //判断路径中是否有id值\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id;\r\n        this.clerkId = this.$route.params.id;\r\n        this.getClerkById(id);\r\n        this.initRole();\r\n      } else {\r\n        //清空表单\r\n        this.clerk = {};\r\n      }\r\n    },\r\n    initRole() {\r\n      role.getRoleByClerkId(this.clerkId).then((response) => {\r\n        if (response.data.role) {\r\n          this.managementInfo = \"是\";\r\n        } else {\r\n          this.managementInfo = \"否\";\r\n        }\r\n      });\r\n    },\r\n    //查询部门\r\n    initDepartment() {\r\n      department.getDepartmentList().then((response) => {\r\n        this.departmentList = response.data.departmentList;\r\n      });\r\n    },\r\n\r\n    //根据id查询\r\n    getClerkById(id) {\r\n      clerk\r\n        .getClerkById(id)\r\n        .then((response) => {\r\n          this.clerk = response.data.clerk;\r\n        })\r\n        .catch((error) => {});\r\n    },\r\n    //添加\r\n    save() {\r\n      role\r\n        .uodateRoleByClerkId(this.clerkId, this.managementInfo)\r\n        .then((response) => {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"修改成功!\",\r\n          });\r\n          this.$router.push({ path: \"/permissions/listPermissions\" });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA,OAAAA,KAAA;AACA,OAAAC,IAAA;AACA,OAAAC,UAAA;AACA,OAAAC,YAAA;AACA,OAAAC,QAAA;AAEA;EACAC,UAAA;IAAAF,YAAA,EAAAA,YAAA;IAAAC,QAAA,EAAAA;EAAA;EACAE,IAAA,WAAAA,KAAA;IAAA,IAAAC,IAAA;IACA,OAAAA,IAAA;MACAC,OAAA,EAAAC,OAAA,CAAAC,GAAA,CAAAC,gBAAA;MACAC,cAAA;MACAZ,KAAA;MACAa,eAAA;MAAA;MACAC,cAAA;IAAA,GAAAC,eAAA,CAAAR,IAAA,qBACA,QAAAQ,eAAA,CAAAR,IAAA,sBACA,QAAAQ,eAAA,CAAAR,IAAA,qBACA,IAAAQ,eAAA,CAAAR,IAAA,aACA,KAAAA,IAAA;EAEA;EACAS,OAAA,WAAAA,QAAA;IACA,KAAAC,IAAA;IACA,KAAAC,cAAA;EACA;EACAC,KAAA;IACA;IACAC,MAAA,WAAAA,OAAAC,EAAA,EAAAC,IAAA;MACA;MACA,KAAAL,IAAA;IACA;EACA;EACAM,OAAA;IACA;IACAN,IAAA,WAAAA,KAAA;MACA;MACA,SAAAG,MAAA,CAAAI,MAAA,SAAAJ,MAAA,CAAAI,MAAA,CAAAC,EAAA;QACA,IAAAA,EAAA,QAAAL,MAAA,CAAAI,MAAA,CAAAC,EAAA;QACA,KAAAC,OAAA,QAAAN,MAAA,CAAAI,MAAA,CAAAC,EAAA;QACA,KAAAE,YAAA,CAAAF,EAAA;QACA,KAAAG,QAAA;MACA;QACA;QACA,KAAA5B,KAAA;MACA;IACA;IACA4B,QAAA,WAAAA,SAAA;MAAA,IAAAC,KAAA;MACA5B,IAAA,CAAA6B,gBAAA,MAAAJ,OAAA,EAAAK,IAAA,WAAAC,QAAA;QACA,IAAAA,QAAA,CAAA1B,IAAA,CAAAL,IAAA;UACA4B,KAAA,CAAAjB,cAAA;QACA;UACAiB,KAAA,CAAAjB,cAAA;QACA;MACA;IACA;IACA;IACAM,cAAA,WAAAA,eAAA;MAAA,IAAAe,MAAA;MACA/B,UAAA,CAAAgC,iBAAA,GAAAH,IAAA,WAAAC,QAAA;QACAC,MAAA,CAAAnB,cAAA,GAAAkB,QAAA,CAAA1B,IAAA,CAAAQ,cAAA;MACA;IACA;IAEA;IACAa,YAAA,WAAAA,aAAAF,EAAA;MAAA,IAAAU,MAAA;MACAnC,KAAA,CACA2B,YAAA,CAAAF,EAAA,EACAM,IAAA,WAAAC,QAAA;QACAG,MAAA,CAAAnC,KAAA,GAAAgC,QAAA,CAAA1B,IAAA,CAAAN,KAAA;MACA,GACAoC,KAAA,WAAAC,KAAA;IACA;IACA;IACAC,IAAA,WAAAA,KAAA;MAAA,IAAAC,MAAA;MACAtC,IAAA,CACAuC,mBAAA,MAAAd,OAAA,OAAAd,cAAA,EACAmB,IAAA,WAAAC,QAAA;QACAO,MAAA,CAAAE,QAAA;UACAC,IAAA;UACAC,OAAA;QACA;QACAJ,MAAA,CAAAK,OAAA,CAAAC,IAAA;UAAAC,IAAA;QAAA;MACA;IACA;EACA;AACA"}]}