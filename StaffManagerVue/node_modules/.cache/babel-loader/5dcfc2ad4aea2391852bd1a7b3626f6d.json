{"remainingRequest":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\src\\views\\clerk\\saveClerk.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\src\\views\\clerk\\saveClerk.vue","mtime":1679590045791},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\babel.config.js","mtime":1678900645413},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1679135636602},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1679135632674},{"path":"C:\\Users\\天天开心\\OneDrive\\桌面\\实践\\项目\\StaffManager\\StaffManagerVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1679135637839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy9cdTU5MjlcdTU5MjlcdTVGMDBcdTVGQzMvT25lRHJpdmUvXHU2ODRDXHU5NzYyL1x1NUI5RVx1OERGNS9cdTk4NzlcdTc2RUUvU3RhZmZNYW5hZ2VyL1N0YWZmTWFuYWdlclZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50ZXN0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjbGVyayBmcm9tICJAL2FwaS9jbGVyayI7CmltcG9ydCBkZXBhcnRtZW50IGZyb20gIkAvYXBpL2RlcGFydG1lbnQiOwppbXBvcnQgSW1hZ2VDcm9wcGVyIGZyb20gIkAvY29tcG9uZW50cy9JbWFnZUNyb3BwZXIiOwppbXBvcnQgUGFuVGh1bWIgZnJvbSAiQC9jb21wb25lbnRzL1BhblRodW1iIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEltYWdlQ3JvcHBlcjogSW1hZ2VDcm9wcGVyLAogICAgUGFuVGh1bWI6IFBhblRodW1iCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF9yZWY7CiAgICB2YXIgY2hlY2tQaG9uZSA9IGZ1bmN0aW9uIGNoZWNrUGhvbmUocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSB7CiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCLmiYvmnLrlj7fkuI3og73kuLrnqboiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlZyA9IC9eMVszfDR8NXw3fDhdWzAtOV1cZHs4fSQvOwogICAgICAgIGlmIChyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeato+ehrueahOaJi+acuuWPtyIpKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgYmFzZUFwaTogcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSwKICAgICAgY2xlcms6IHt9LAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLAogICAgICAvLyDkv53lrZjmjInpkq7mmK/lkKbnpoHnlKgsCiAgICAgIGRlcGFydG1lbnRMaXN0OiBudWxsCiAgICB9LCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInNhdmVCdG5EaXNhYmxlZCIsIGZhbHNlKSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJpbWFnZWNyb3BwZXJTaG93IiwgZmFsc2UpLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgImltYWdlY3JvcHBlcktleSIsIDApLCBfZGVmaW5lUHJvcGVydHkoX3JlZiwgInJ1bGUiLCB7CiAgICAgIHNleDogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup5oCn5YirIiwKICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICB9XSwKICAgICAgYWRkcmVzczogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6K+35aGr5YaZ5Zyw5Z2AIiwKICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICB9XSwKICAgICAgcG9zaXRpb246IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogIuivt+Whq+WGmeiBjOWKoSIsCiAgICAgICAgdHJpZ2dlcjogImNoYW5nZSIKICAgICAgfV0sCiAgICAgIGRlcGFydG1lbnRJZDogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6K+36YCJ5oup6YOo6ZeoIiwKICAgICAgICB0cmlnZ2VyOiAiY2hhbmdlIgogICAgICB9XSwKICAgICAgcGhvbmVOdW1iZXI6IFt7CiAgICAgICAgdmFsaWRhdG9yOiBjaGVja1Bob25lLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICB9XSwKICAgICAgbmFtZTogW3sKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5aeT5ZCNIiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfSwgewogICAgICAgIG1pbjogMiwKICAgICAgICBtYXg6IDEwLAogICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggMiDliLAgMTAg5Liq5a2X56ymIiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHBhdHRlcm46IC9eW1x1NGUwMC1cdTlmYTVfYS16QS1aMC05LsK3LV0rJC8sCiAgICAgICAgbWVzc2FnZTogIuWnk+WQjeS4jeaUr+aMgeeJueauiuWtl+espiIsCiAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgIH1dLAogICAgICBpZENhcmQ6IFt7CiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpei6q+S7veivgeWPtyIsCiAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgIH0sIHsKICAgICAgICBtaW46IDE1LAogICAgICAgIG1heDogMTgsCiAgICAgICAgbWVzc2FnZTogIuivt+WmguWunuWhq+WGmTE45L2N5Y+356CB77yM5Lul5L6b5qC45a+5IiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfSwgewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHBhdHRlcm46IC8oXlxkezE1fSQpfCheXGR7MTh9JCl8KF5cZHsxN30oXGR8WHx4KSQpLywKICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5q2j56Gu55qE6Lqr5Lu96K+B5Y+356CBIiwKICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgfV0KICAgIH0pLCBfcmVmOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5pbml0RGVwYXJ0bWVudCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIC8v55uR5ZCsCiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSh0bywgZnJvbSkgewogICAgICAvL+i3r+eUseWPkeeUn+WPmOWMliDmlrnms5XlsLHkvJrmiafooYwKICAgICAgdGhpcy5pbml0KCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldEZvcm06IGZ1bmN0aW9uIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHsKICAgICAgLy/lhbPpl63kuIrkvKDlvLnmoYbnmoTmlrnms5UKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7CiAgICAgIC8v5LiK5Lyg57uE5Lu25Yid5aeL5YyWCiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgfSwKICAgIC8v5LiK5Lyg5oiQ5Yqf5pa55rOVCiAgICBjcm9wU3VjY2VzczogZnVuY3Rpb24gY3JvcFN1Y2Nlc3MoZGF0YSkgewogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsKICAgICAgLy/kuIrkvKDkuYvlkI7mjqXlj6Pov5Tlm57lm77niYflnLDlnYAKICAgICAgdGhpcy5jbGVyay5waG90byA9IGRhdGEudXJsOwogICAgICB0aGlzLmltYWdlY3JvcHBlcktleSA9IHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ICsgMTsKICAgIH0sCiAgICAvL+WIneWni+WMlgogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgLy/liKTmlq3ot6/lvoTkuK3mmK/lkKbmnIlpZOWAvAogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICB0aGlzLmdldENsZXJrQnlJZChpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy/muIXnqbrooajljZUKICAgICAgICB0aGlzLmNsZXJrID0ge307CiAgICAgIH0KICAgIH0sCiAgICAvL+afpeivoumDqOmXqAogICAgaW5pdERlcGFydG1lbnQ6IGZ1bmN0aW9uIGluaXREZXBhcnRtZW50KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBkZXBhcnRtZW50LmdldERlcGFydG1lbnRMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5kZXBhcnRtZW50TGlzdCA9IHJlc3BvbnNlLmRhdGEuZGVwYXJ0bWVudExpc3Q7CiAgICAgIH0pOwogICAgfSwKICAgIC8v5L+u5pS5CiAgICB1cGRhdGVDbGVyazogZnVuY3Rpb24gdXBkYXRlQ2xlcmsoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICBjbGVyay51cGRhdGVDbGVyayh0aGlzLmNsZXJrKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfISIKICAgICAgICB9KTsKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvY2xlcmsvbGlzdENsZXJrIgogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+agueaNrmlk5p+l6K+iCiAgICBnZXRDbGVya0J5SWQ6IGZ1bmN0aW9uIGdldENsZXJrQnlJZChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgY2xlcmsuZ2V0Q2xlcmtCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5jbGVyayA9IHJlc3BvbnNlLmRhdGEuY2xlcms7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge30pOwogICAgfSwKICAgIHNhdmVPclVwZGF0ZTogZnVuY3Rpb24gc2F2ZU9yVXBkYXRlKGZvcm1OYW1lKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIC8v5Yik5pat5piv5L+u5pS56L+Y5piv5re75YqgCiAgICAgICAgICAvL+WIpOaWrei3r+W+hOS4reaYr+WQpuaciWlkCiAgICAgICAgICBpZiAoX3RoaXM0LiRyb3V0ZS5wYXJhbXMgJiYgX3RoaXM0LiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgICAgLy/kv67mlLkKICAgICAgICAgICAgX3RoaXM0LnVwZGF0ZUNsZXJrKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvL+a3u+WKoAogICAgICAgICAgICBfdGhpczQuc2F2ZUNsZXJrKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+a3u+WKoAogICAgc2F2ZUNsZXJrOiBmdW5jdGlvbiBzYXZlQ2xlcmsoZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIGNsZXJrLmFkZENsZXJrKHRoaXMuY2xlcmspLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy/mt7vliqDmiJDlip8KICAgICAgICAvL+aPkOekuuS/oeaBrwogICAgICAgIF90aGlzNS4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIgogICAgICAgIH0pOwogICAgICAgIC8v5Zue5Yiw5YiX6KGoIOi3r+eUsei3s+i9rCjph43lrprlkJEpCiAgICAgICAgX3RoaXM1LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiL3Blcm1pc3Npb25zL2xpc3RDbGVyayIKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgLy/mj5DnpLrkv6Hmga8KICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAvLyAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAvLyAgIG1lc3NhZ2U6ICLmt7vliqDlpLHotKUiLAogICAgICAgIC8vIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["clerk","department","ImageCropper","PanThumb","components","data","_ref","checkPhone","rule","value","callback","Error","reg","test","baseApi","process","env","VUE_APP_BASE_API","saveBtnDisabled","departmentList","_defineProperty","sex","required","message","trigger","address","position","departmentId","phoneNumber","validator","name","min","max","pattern","idCard","created","init","initDepartment","watch","$route","to","from","methods","resetForm","formName","$refs","resetFields","close","imagecropperShow","imagecropperKey","cropSuccess","photo","url","params","id","getClerkById","_this","getDepartmentList","then","response","updateClerk","_this2","$message","type","$router","push","path","_this3","catch","error","saveOrUpdate","_this4","validate","valid","saveClerk","_this5","addClerk"],"sources":["src/views/clerk/saveClerk.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form :model=\"clerk\" ref=\"clerk\" :rules=\"rule\" label-width=\"120px\">\r\n      <el-form-item label=\"员工编号\">\r\n        <el-col :span=\"6\">\r\n          <el-input :span=\"6\" :disabled=\"true\" v-model=\"clerk.id\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"name\" label=\"员工名称\">\r\n        <el-col :span=\"4\">\r\n          <el-input maxlength=\"5\" show-word-limit v-model=\"clerk.name\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"sex\" label=\"性别\">\r\n        <el-col :span=\"4\">\r\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"0\">女</el-radio>\r\n          <el-radio v-model=\"clerk.sex\" prop=\"sex\" label=\"1\">男</el-radio>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"phoneNumber\" label=\"手机号\">\r\n        <el-col :span=\"6\">\r\n          <el-input v-model=\"clerk.phoneNumber\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"idCard\" label=\"身份证号\">\r\n        <el-col :span=\"8\">\r\n          <el-input v-model=\"clerk.idCard\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"address\" label=\"地址\">\r\n        <el-input v-model=\"clerk.address\" />\r\n      </el-form-item>\r\n      <el-form-item prop=\"position\" label=\"职务\">\r\n        <el-col :span=\"4\">\r\n          <el-input v-model=\"clerk.position\" />\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item prop=\"departmentId\" label=\"部门\">\r\n        <el-select v-model=\"clerk.departmentId\" clearable placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in departmentList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"员工照片\">\r\n        <!-- 头衔缩略图 -->\r\n        <pan-thumb :image=\"baseApi + clerk.photo\" />\r\n        <!-- 文件上传按钮 -->\r\n        <el-button\r\n          type=\"primary\"\r\n          icon=\"el-icon-upload\"\r\n          @click=\"imagecropperShow = true\"\r\n          >更换照片</el-button\r\n        >\r\n        <!--v-show：是否显示上传组件\r\n        :key：类似于id，如果一个页面多个图片上传控件，可以做区分\r\n        :url：后台上传的url地址\r\n        @close：关闭上传组件\r\n        @crop-upload-success：上传成功后的回调-->\r\n        <image-cropper\r\n          v-show=\"imagecropperShow\"\r\n          :width=\"300\"\r\n          :height=\"300\"\r\n          :key=\"imagecropperKey\"\r\n          url=\"http://localhost:8001/oss/fileoss/uploadOssFile\"\r\n          field=\"file\"\r\n          @close=\"close\"\r\n          @crop-upload-success=\"cropSuccess\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          :disabled=\"saveBtnDisabled\"\r\n          type=\"primary\"\r\n          @click=\"saveOrUpdate('clerk')\"\r\n          >保存</el-button\r\n        >\r\n        <el-button @click=\"resetForm('clerk')\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport clerk from \"@/api/clerk\";\r\nimport department from \"@/api/department\";\r\nimport ImageCropper from \"@/components/ImageCropper\";\r\nimport PanThumb from \"@/components/PanThumb\";\r\n\r\nexport default {\r\n  components: { ImageCropper, PanThumb },\r\n  data() {\r\n    var checkPhone = (rule, value, callback) => {\r\n      if (!value) {\r\n        return callback(new Error(\"手机号不能为空\"));\r\n      } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/;\r\n        if (reg.test(value)) {\r\n          callback();\r\n        } else {\r\n          return callback(new Error(\"请输入正确的手机号\"));\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      baseApi:  process.env.VUE_APP_BASE_API,\r\n      clerk: {},\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      departmentList: null,\r\n      saveBtnDisabled: false, // 保存按钮是否禁用,\r\n      imagecropperShow: false, //上传弹窗组件是否显示\r\n      imagecropperKey: 0, //上传组件的key值\r\n      rule: {\r\n        sex: [{ required: true, message: \"请选择性别\", trigger: \"change\" }],\r\n        address: [{ required: true, message: \"请填写地址\", trigger: \"change\" }],\r\n        position: [\r\n          { required: true, message: \"请填写职务\", trigger: \"change\" },\r\n        ],\r\n        departmentId: [\r\n          { required: true, message: \"请选择部门\", trigger: \"change\" },\r\n        ],\r\n        phoneNumber: [\r\n          { validator: checkPhone, required: true, trigger: \"blur\" },\r\n        ],\r\n        name: [\r\n          { required: true, message: \"请输入姓名\", trigger: \"blur\" },\r\n          {\r\n            min: 2,\r\n            max: 10,\r\n            message: \"长度在 2 到 10 个字符\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            required: true,\r\n            pattern: /^[\\u4e00-\\u9fa5_a-zA-Z0-9.·-]+$/,\r\n            message: \"姓名不支持特殊字符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        idCard: [\r\n          { required: true, message: \"请输入身份证号\", trigger: \"blur\" },\r\n          {\r\n            min: 15,\r\n            max: 18,\r\n            message: \"请如实填写18位号码，以供核对\",\r\n            trigger: \"blur\",\r\n          },\r\n          {\r\n            required: true,\r\n            pattern: /(^\\d{15}$)|(^\\d{18}$)|(^\\d{17}(\\d|X|x)$)/,\r\n            message: \"请输入正确的身份证号码\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.initDepartment();\r\n  },\r\n  watch: {\r\n    //监听\r\n    $route(to, from) {\r\n      //路由发生变化 方法就会执行\r\n      this.init();\r\n    },\r\n  },\r\n  methods: {\r\n    resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      },\r\n    close() {\r\n      //关闭上传弹框的方法\r\n      this.imagecropperShow = false;\r\n      //上传组件初始化\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n    //上传成功方法\r\n    cropSuccess(data) {\r\n      this.imagecropperShow = false;\r\n      //上传之后接口返回图片地址\r\n      this.clerk.photo = data.url;\r\n      this.imagecropperKey = this.imagecropperKey + 1;\r\n    },\r\n    //初始化\r\n    init() {\r\n      //判断路径中是否有id值\r\n      if (this.$route.params && this.$route.params.id) {\r\n        const id = this.$route.params.id;\r\n        this.getClerkById(id);\r\n      } else {\r\n        //清空表单\r\n        this.clerk = {};\r\n      }\r\n    },\r\n    //查询部门\r\n    initDepartment() {\r\n      department.getDepartmentList().then((response) => {\r\n        this.departmentList = response.data.departmentList;\r\n      });\r\n    },\r\n    //修改\r\n    updateClerk() {\r\n      clerk.updateClerk(this.clerk).then((response) => {\r\n        this.$message({\r\n          type: \"success\",\r\n          message: \"修改成功!\",\r\n        });\r\n        this.$router.push({ path: \"/clerk/listClerk\" });\r\n      });\r\n    },\r\n    //根据id查询\r\n    getClerkById(id) {\r\n      clerk\r\n        .getClerkById(id)\r\n        .then((response) => {\r\n          this.clerk = response.data.clerk;\r\n        })\r\n        .catch((error) => {});\r\n    },\r\n    saveOrUpdate(formName) {\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          //判断是修改还是添加\r\n          //判断路径中是否有id\r\n          if (this.$route.params && this.$route.params.id) {\r\n            //修改\r\n            this.updateClerk();\r\n          } else {\r\n            //添加\r\n            this.saveClerk();\r\n          }\r\n        }\r\n      });\r\n    },\r\n    //添加\r\n    saveClerk(formName) {\r\n      clerk\r\n        .addClerk(this.clerk)\r\n        .then((response) => {\r\n          //添加成功\r\n          //提示信息\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"添加成功\",\r\n          });\r\n          //回到列表 路由跳转(重定向)\r\n          this.$router.push({ path: \"/permissions/listClerk\" });\r\n        })\r\n        .catch((error) => {\r\n          //提示信息\r\n          // this.$message({\r\n          //   type: \"warning\",\r\n          //   message: \"添加失败\",\r\n          // });\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n"],"mappings":"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"}]}